# Vlan的划分

### ip地址分类
在 A 类、B 类、C 类 IP 地址中：

- 如果主机号是全 1，那么这个地址为直接广播地址，它是用来使路由器将一个分组以广播形式发送给特定网络上的所有主机。

- 32 位全为 1 的 IP 地址 “255.255.255.255” 为**受限广播地址**用来将一个分组以广播方式发送给本网络中的所有主机，`路由器`则阻挡该分组通过，将其广播功能限制在本网内部。

  |                                  |           **A类IPv4地址**            |            **B类IPv4地址**            |            **C类IPv4地址**             |                   **D类IPv4地址**                   |               **E类IPv4地址**                |
  | :------------------------------: | :----------------------------------: | :-----------------------------------: | :------------------------------------: | :-------------------------------------------------: | :------------------------------------------: |
  |          **网络标志位**          |                **0**                 |                **10**                 |                **110**                 |                      **1110**                       |                  **11110**                   |
  |          **IP地址范围**          |     **1.0.0.0~127.255.255.255**      |     **128.0.0.0~191.255.255.255**     |     **192.0.0.0~223.255.255.255**      |            **224.0.0.0~239.255.255.255**            |        **240.0.0.0~247.255.255.255**         |
  |        **可用IP地址范围**        |     **1.0.0.1~127.255.255.254**      |     **128.0.0.1~191.255.255.254**     |     **192.0.0.1~223.255.255.254**      |                                                     |                                              |
  |    **是否可以分配给主机使用**    |                **是**                |                **是**                 |                 **是**                 |                       **否**                        |                    **否**                    |
  |        **网络数量（个）**        |            **126 (27-2)**            |            **16384 (214)**            |           **2097152 (221)**            |                       **---**                       |                   **---**                    |
  | **每个网络中可容纳主机数（个）** |         **16777214 (224-2)**         |           **65534 (216-2)**           |             **254 (28-2)**             |                       **---**                       |                   **---**                    |
  |           **适用范围**           |        **大量主机的大型网络**        |       **中等规模主机数的网络**        |             **小型局域网**             | **留给Internet体系结构委员会(IAB)使用【组播地址】** | **保留，仅作为搜索、Internet的实验和开发用** |
  |           **私有地址**           | **10.0.0.0～10.255.255.255**(256个B) | **172.16.0.0～172.31.255.255**(16个B) | **192.168.0.0～192.168.255.255**(1个B) |                                                     |                                              |


**[注意]**:要判断两个IP地址是不是在同一个网段，就将它们的IP地址分别与子网掩码做与运算，得到的结果一网络号，如果网络号相同，就在同一子网，否则，不在同一子网。
### Vlan 的划分

```
Switch>en
Switch#config t
Enter configuration commands, one per line.  End with CNTL/Z.
Switch(config)#vlan 3
Switch(config-vlan)#name VLAN3                  //命名
Switch(config-vlan)#exit
Switch(config)#interface range fa0/3 - 6        //多端口同时添加
Switch(config-if-range)#switchport mode access  //设置端口模式为access
Switch(config-if-range)#switchport access vlan 3
Switch(config-if-range)#end
Switch#show vlan brief                          //查看端口信息
```

**注意**：若两台交换机之间端口模式为**access**，且交换机AB处于`vlan 1`，但交换机A中的用户1处于 `vlan 2`则通信时消息无法由A->B，若交换机A中的用户2也处于 `vlan 1`则通信时消息可以由A->B.为避免这种麻烦，一般都将两交换机的端口模式设为 **trunk**

```
Switch#config t
Enter configuration commands, one per line.  End with CNTL/Z.
Switch(config)#interface fa0/4
Switch(config-if)#switchport mode trunk   //设置端口为trunk
```

- 当电脑和路由器相连时需要设置 **网关**

- 当两路由器两连采用静态路由时，不要忘记配置 路由路径

  -路径形式：`Switch(config)#ip route 192.168.3.0(目标网段) 255.255.255.0 192.168.2.2（下一跳的进入端口号地址或用端口号代替）`

### 例题分析
![001.png](https://raw.githubusercontent.com/Sunonx/Sunonx.github.io/master/images/001.png)

![002.png](https://raw.githubusercontent.com/Sunonx/Sunonx.github.io/master/images/002.png)

![003.png](https://raw.githubusercontent.com/Sunonx/Sunonx.github.io/master/images/003.png)


